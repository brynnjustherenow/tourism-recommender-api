<!--pages/index/index.wxml-->
<view class="container">
  <!-- Search Bar -->
  <view class="search-bar" bindtap="onSearchTap">
    <view class="search-input">
      <icon type="search" size="14" color="#999"></icon>
      <text>搜索推荐官或目的地</text>
    </view>
  </view>

  <!-- Banner -->
  <view class="banner">
    <swiper class="banner-swiper" indicator-dots="{{true}}" autoplay="{{true}}" interval="{{3000}}" duration="{{500}}">
      <swiper-item wx:for="{{banners}}" wx:key="id">
        <image class="banner-image" src="{{item.image}}" mode="aspectFill" bindtap="onBannerTap" data-id="{{item.id}}"></image>
      </swiper-item>
    </swiper>
  </view>

  <!-- Categories -->
  <view class="categories">
    <view class="category-item" wx:for="{{categories}}" wx:key="id" bindtap="onCategoryTap" data-id="{{item.id}}">
      <image class="category-icon" src="{{item.icon}}" mode="aspectFit"></image>
      <text class="category-name">{{item.name}}</text>
    </view>
  </view>

  <!-- Featured Recommenders -->
  <view class="section">
    <view class="section-header">
      <text class="section-title">精选推荐官</text>
      <text class="section-more" bindtap="onMoreRecommendors">更多 ></text>
    </view>

    <scroll-view class="recommendor-scroll" scroll-x="{{true}}" enable-flex="{{true}}">
      <view class="recommendor-item" wx:for="{{recommendors}}" wx:key="id" bindtap="onRecommendorTap" data-id="{{item.id}}">
        <image class="recommendor-avatar" src="{{item.avatar || '/images/default-avatar.png'}}" mode="aspectFill"></image>
        <view class="recommendor-info">
          <text class="recommendor-name">{{item.name}}</text>
          <view class="recommendor-meta">
            <text class="recommendor-region">{{item.region.name}}</text>
            <text class="recommendor-rating">{{item.rating}}分</text>
          </view>
          <text class="recommendor-bio">{{item.bio}}</text>
        </view>
      </view>
    </scroll-view>
  </view>

  <!-- Popular Destinations -->
  <view class="section">
    <view class="section-header">
      <text class="section-title">热门目的地</text>
      <text class="section-more" bindtap="onMoreDestinations">更多 ></text>
    </view>

    <view class="destination-grid">
      <view class="destination-item" wx:for="{{destinations}}" wx:key="id" bindtap="onDestinationTap" data-id="{{item.id}}">
        <image class="destination-image" src="{{getFirstImage(item.images)}}" mode="aspectFill"></image>
        <view class="destination-content">
          <text class="destination-name">{{item.name}}</text>
          <view class="destination-meta">
            <text class="destination-category">{{getCategoryName(item.category)}}</text>
            <text class="destination-rating">{{item.rating}}分</text>
          </view>
        </view>
      </view>
    </view>
  </view>

  <!-- Load More -->
  <view class="load-more" wx:if="{{hasMore}}" bindtap="loadMore">
    <text class="load-more-text">加载更多</text>
  </view>

  <!-- No More Data -->
  <view class="no-more" wx:if="{{!hasMore && destinations.length > 0}}">
    <text class="no-more-text">没有更多了</text>
  </view>

  <!-- Empty State -->
  <view class="empty-state" wx:if="{{!loading && recommendors.length === 0 && destinations.length === 0}}">
    <image class="empty-image" src="/images/empty.png" mode="aspectFit"></image>
    <text class="empty-text">暂无数据</text>
  </view>
</view>

<!-- Loading -->
<view class="loading-mask" wx:if="{{loading}}">
  <view class="loading-content">
    <view class="loading-spinner"></view>
    <text class="loading-text">加载中...</text>
  </view>
</view>
