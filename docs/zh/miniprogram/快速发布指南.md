# 🚀 乡村旅游推荐官小程序 - 快速发布指南

## 📋 项目信息

- **小程序 AppID**: `wxa1802e324f2f4712`
- **后端 API**: `https://tourism-recommender-api.onrender.com`
- **小程序页面**:
  - 推荐官列表: `pages/recommendor/list`
  - 推荐官详情: `pages/recommendor/detail`

---

## ⚡ 5分钟快速发布

### 1️⃣ 安装工具

下载并安装 **微信开发者工具**：
- Windows: https://developers.weixin.qq.com/miniprogram/dev/devtools/download.html
- Mac: https://developers.weixin.qq.com/miniprogram/dev/devtools/download.html

### 2️⃣ 导入项目

1. 打开微信开发者工具
2. 点击 **"+"** 或 **"导入项目"**
3. 填写信息：
   - **项目目录**: 选择 `wxapp` 文件夹
   - **AppID**: `wxa1802e324f2f4712`
   - **项目名称**: `乡村旅游推荐官`
4. 点击 **"导入"**

### 3️⃣ 本地测试

1. 点击工具栏的 **"编译"** 按钮
2. 在模拟器中查看小程序是否正常显示
3. 点击 **"真机调试"**，用手机微信扫码测试

### 4️⃣ 上传代码

1. 点击工具栏的 **"上传"** 按钮
2. 填写版本信息：
   - **版本号**: `1.0.0`
   - **版本备注**: `首次发布 - 推荐官列表和详情页`
3. 点击 **"上传"**

### 5️⃣ 发布体验版

1. 登录 [微信公众平台](https://mp.weixin.qq.com/)
2. 进入 **"管理"** → **"版本管理"**
3. 在 **"开发版本"** 标签页，找到刚上传的版本
4. 点击右侧的 **"选为体验版本"** 按钮
5. 点击 **"体验版二维码"**，扫描即可体验

---

## 🔧 必要配置

### 配置服务器域名（重要！）

在 **微信公众平台** → **开发** → **开发管理** → **开发设置** → **服务器域名**：

```
request 合法域名：
https://tourism-recommender-api.onrender.com

uploadFile 合法域名：
https://tourism-recommender-api.onrender.com

downloadFile 合法域名：
https://tourism-recommender-api.onrender.com
```

⚠️ **注意**：
- 域名必须是 HTTPS
- 域名需要 ICP 备案（中国大陆）
- 每月最多修改 5 次

### 添加体验成员

在 **"版本管理"** → **"体验版本"** → **"管理体验成员"**：
1. 输入体验者的微信号
2. 点击 **"添加"**
3. 体验者会收到邀请通知

---

## 📱 体验版测试

### 方式一：扫描二维码
1. 在微信公众平台获取体验版二维码
2. 用微信扫描
3. 小程序会显示"体验版"标识

### 方式二：微信开发者工具
1. 打开微信开发者工具
2. 点击 **"项目"** → **"体验版"**
3. 选择对应的版本

---

## 🔄 更新体验版

### 修改代码后更新

```
1. 在微信开发者工具中修改代码
   ↓
2. 点击"编译"测试
   ↓
3. 点击"上传"（使用新的版本号，如 1.0.1）
   ↓
4. 在微信公众平台"选为体验版本"
   ↓
5. 重新生成体验版二维码
```

### 版本号建议

```
1.0.0      - 初始版本
1.0.1      - 修复 bug
1.1.0      - 添加新功能
1.0.0.test1 - 测试版本
```

---

## 🐛 常见问题速查

### ❌ 上传失败
**原因**: 网络问题或配置错误  
**解决**: 
1. 检查网络连接
2. 重新登录开发者工具
3. 检查 AppID 是否正确

### ❌ API 请求失败 - "url not in domain list"
**原因**: 服务器域名未配置  
**解决**:
1. 登录微信公众平台
2. 添加后端域名到服务器域名列表
3. 等待 10-15 分钟生效

### ❌ 扫描二维码提示"页面不存在"
**原因**: 小程序代码未正确上传  
**解决**:
1. 检查上传记录
2. 重新上传代码
3. 确认设置为体验版本

### ❌ 体验版无法访问
**原因**: 不是体验成员  
**解决**:
1. 添加测试用户为体验成员
2. 让测试用户接受邀请
3. 重新生成二维码

---

## ✅ 测试清单

发布体验版前，确保以下功能正常：

- [ ] 推荐官列表显示正常
- [ ] 推荐官详情页显示正常
- [ ] 页面跳转流畅
- [ ] 网络请求正常
- [ ] 图片加载正常
- [ ] 错误提示友好
- [ ] 真机调试无问题

---

## 📊 体验版 vs 正式版

| 特性 | 体验版 | 正式版 |
|------|--------|--------|
| 访问范围 | 仅体验成员 | 所有微信用户 |
| 有效期 | 30天 | 永久 |
| 域名要求 | HTTP 或 HTTPS | 必须 HTTPS |
| 审核要求 | 不需要 | 需要审核通过 |
| 搜索显示 | 不显示 | 可搜索 |

---

## 🎯 从体验到正式版

测试通过后，提交正式版审核：

```
1. 体验版测试通过
   ↓
2. 在微信公众平台 → 版本管理
   ↓
3. 点击"提交审核"
   ↓
4. 填写审核信息
   ↓
5. 等待审核（1-7个工作日）
   ↓
6. 审核通过后点击"发布"
```

---

## 📞 快速帮助

### 官方文档
- [微信小程序官方文档](https://developers.weixin.qq.com/miniprogram/dev/framework/)
- [版本管理](https://developers.weixin.qq.com/miniprogram/dev/framework/operating/version.html)

### 获取帮助
- 微信开放社区: https://developers.weixin.qq.com/community/
- 客服电话: 95017

---

## 🎉 完成！

现在你已经成功发布小程序体验版！

**下一步**：
1. 分享体验版二维码给测试人员
2. 收集反馈并修复问题
3. 多次迭代更新体验版
4. 测试通过后提交正式版审核

祝你的乡村旅游推荐官小程序大获成功！🚀