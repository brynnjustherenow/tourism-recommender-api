# åç«¯æœåŠ¡å¿«é€Ÿéƒ¨ç½²æŒ‡å—

æœ¬æŒ‡å—å°†å¸®åŠ©ä½ å¿«é€Ÿå°†ä¹¡æ‘æ—…æ¸¸æ¨èç³»ç»Ÿçš„åç«¯æœåŠ¡éƒ¨ç½²åˆ°å…è´¹çš„äº‘æœåŠ¡å¹³å°ä¸Šï¼Œç”¨äºæµ‹è¯•å’Œæ¼”ç¤ºã€‚

## ğŸ“‹ ç›®å½•

- [æ–¹æ¡ˆå¯¹æ¯”](#æ–¹æ¡ˆå¯¹æ¯”)
- [å‰ç½®è¦æ±‚](#å‰ç½®è¦æ±‚)
- [æ¨èæ–¹æ¡ˆï¼šRender.com](#æ¨èæ–¹æ¡ˆ-rendercom)
- [å…¶ä»–æ–¹æ¡ˆ](#å…¶ä»–æ–¹æ¡ˆ)
- [å¸¸è§é—®é¢˜](#å¸¸è§é—®é¢˜)
- [æ³¨æ„äº‹é¡¹](#æ³¨æ„äº‹é¡¹)

---

## æ–¹æ¡ˆå¯¹æ¯”

| å¹³å° | å…è´¹é¢åº¦ | æ•°æ®åº“ | å›½å†…è®¿é—® | éƒ¨ç½²éš¾åº¦ | æ¨èåº¦ |
|------|---------|--------|---------|---------|--------|
| **Render.com** | âœ… å…è´¹ + å…è´¹PostgreSQL | âœ… åŒ…å« | â­â­â­ | ç®€å• | â­â­â­â­â­ |
| **Railway.app** | $5/æœˆé¢åº¦ | âœ… åŒ…å« | â­â­ | ç®€å• | â­â­â­â­ |
| **Zeabur** | æœ‰é™å…è´¹é¢åº¦ | éœ€å•ç‹¬é…ç½® | â­â­â­â­ | ä¸­ç­‰ | â­â­â­â­ |
| **Fly.io** | æœ‰é™å…è´¹é¢åº¦ | éœ€å•ç‹¬é…ç½® | â­â­â­ | å¤æ‚ | â­â­â­ |
| **Vercel** | æ— é™åˆ¶ | âŒ ä¸æ”¯æŒåç«¯ | â­â­â­â­â­ | ç®€å• | â­â­ |

**æ¨èé€‰æ‹©ï¼šRender.com** - æœ€é€‚åˆå¿«é€Ÿæµ‹è¯•ï¼ŒåŒ…å«å…è´¹çš„ PostgreSQL æ•°æ®åº“ã€‚

---

## å‰ç½®è¦æ±‚

åœ¨å¼€å§‹éƒ¨ç½²ä¹‹å‰ï¼Œè¯·ç¡®ä¿ä½ å·²å‡†å¤‡å¥½ï¼š

1. âœ… **GitHub è´¦å·**
   - å°†é¡¹ç›®ä»£ç æ¨é€åˆ° GitHub ä»“åº“
   - ç¡®ä¿ä»“åº“æ˜¯å…¬å¼€çš„ï¼ˆæˆ–è€…ä½¿ç”¨ç§æœ‰ä»“åº“ï¼‰

2. âœ… **æ•°æ®åº“å‡†å¤‡**
   - æœ¬åœ°æ•°æ®åº“å·²åˆå§‹åŒ–å¹¶æœ‰æµ‹è¯•æ•°æ®
   - æˆ–è€…å…è®¸å¹³å°åˆ›å»ºæ–°çš„ç©ºæ•°æ®åº“

3. âœ… **ç¯å¢ƒå˜é‡**
   - äº†è§£éœ€è¦é…ç½®çš„ç¯å¢ƒå˜é‡ï¼ˆè§ä¸‹æ–‡ï¼‰

4. âœ… **é¡¹ç›®ç»“æ„**
   ```
   tourism_recommender/
   â”œâ”€â”€ backend/
   â”‚   â”œâ”€â”€ main.go
   â”‚   â”œâ”€â”€ go.mod
   â”‚   â”œâ”€â”€ go.sum
   â”‚   â””â”€â”€ config/
   â”œâ”€â”€ deploy/
   â”‚   â”œâ”€â”€ render.yaml
   â”‚   â”œâ”€â”€ Dockerfile
   â”‚   â””â”€â”€ .env.example
   â””â”€â”€ ...
   ```

---

## æ¨èæ–¹æ¡ˆï¼šRender.com

Render.com æ˜¯ä¸€ä¸ªç°ä»£äº‘å¹³å°ï¼Œæä¾›å…è´¹çš„ Web æœåŠ¡å’Œ PostgreSQL æ•°æ®åº“ã€‚

### æ­¥éª¤ 1ï¼šåˆ›å»º Render è´¦å·

1. è®¿é—® [https://render.com](https://render.com)
2. ç‚¹å‡» "Get Started"
3. ä½¿ç”¨ GitHub è´¦å·ç™»å½•å¹¶æˆæƒ

### æ­¥éª¤ 2ï¼šå‡†å¤‡é¡¹ç›®

ç¡®ä¿ä½ çš„é¡¹ç›®å·²æ¨é€åˆ° GitHubï¼š

```bash
# åœ¨é¡¹ç›®æ ¹ç›®å½•
git add .
git commit -m "Prepare for deployment"
git push origin main
```

### æ­¥éª¤ 3ï¼šåˆ›å»ºæ•°æ®åº“

1. åœ¨ Render æ§åˆ¶å°ï¼Œç‚¹å‡» **"New +"**
2. é€‰æ‹© **"PostgreSQL"**
3. å¡«å†™ä»¥ä¸‹ä¿¡æ¯ï¼š
   - **Name**: `tourism-recommender-db`
   - **Database**: `tourism_recommender`
   - **User**: `tourism_user`
   - **Region**: é€‰æ‹©ç¦»ä½ æœ€è¿‘çš„åŒºåŸŸï¼ˆå¦‚ Singapore æˆ– Oregonï¼‰
   - **Plan**: é€‰æ‹© **Free**
4. ç‚¹å‡» **"Create Database"**
5. ç­‰å¾…æ•°æ®åº“åˆ›å»ºå®Œæˆï¼ˆçº¦ 2-3 åˆ†é’Ÿï¼‰

### æ­¥éª¤ 4ï¼šè·å–æ•°æ®åº“è¿æ¥ä¿¡æ¯

1. ç‚¹å‡»åˆ›å»ºçš„æ•°æ®åº“
2. åœ¨ **"Connect"** éƒ¨åˆ†æ‰¾åˆ° **"External Database URL"**
3. è®°å½•ä»¥ä¸‹ä¿¡æ¯ï¼ˆç¨åéœ€è¦ï¼‰ï¼š
   - **Host**
   - **Port**
   - **User**
   - **Password**ï¼ˆç‚¹å‡» "Show" æ˜¾ç¤ºï¼‰
   - **Database Name**

### æ­¥éª¤ 5ï¼šåˆ›å»º Web æœåŠ¡

#### æ–¹æ³• Aï¼šä½¿ç”¨ render.yaml è‡ªåŠ¨éƒ¨ç½²ï¼ˆæ¨èï¼‰

1. åœ¨ä½ çš„ GitHub ä»“åº“æ ¹ç›®å½•åˆ›å»º `render.yaml` æ–‡ä»¶
2. å¤åˆ¶ `deploy/render.yaml` çš„å†…å®¹
3. æäº¤å¹¶æ¨é€åˆ° GitHubï¼š
   ```bash
   git add render.yaml
   git commit -m "Add Render configuration"
   git push
   ```
4. åœ¨ Render æ§åˆ¶å°ï¼Œç‚¹å‡» **"New +"**
5. é€‰æ‹© **"Existing repository"**
6. é€‰æ‹©ä½ çš„ GitHub ä»“åº“
7. Render ä¼šè‡ªåŠ¨æ£€æµ‹ `render.yaml` å¹¶æ˜¾ç¤ºé…ç½®
8. ç‚¹å‡» **"Create Web Service"**

#### æ–¹æ³• Bï¼šæ‰‹åŠ¨é…ç½® Web æœåŠ¡

1. åœ¨ Render æ§åˆ¶å°ï¼Œç‚¹å‡» **"New +"**
2. é€‰æ‹© **"Web Service"**
3. é€‰æ‹©ä½ çš„ GitHub ä»“åº“
4. é…ç½®ä»¥ä¸‹é€‰é¡¹ï¼š

   **Build & Deploy**
   - **Name**: `tourism-recommender-api`
   - **Region**: é€‰æ‹©ä¸æ•°æ®åº“ç›¸åŒçš„åŒºåŸŸ
   - **Branch**: `main`
   - **Runtime**: `Go`
   - **Build Command**: `go build -o main main.go`
   - **Start Command**: `./main`

   **Environment**
   æ·»åŠ ä»¥ä¸‹ç¯å¢ƒå˜é‡ï¼š

   ```bash
   # åº”ç”¨é…ç½®
   GIN_MODE=release
   SERVER_PORT=8080

   # æ•°æ®åº“é…ç½®ï¼ˆä»æ­¥éª¤ 4 è·å–ï¼‰
   DB_HOST=d-xxx.oregon-postgres.render.com
   DB_PORT=5432
   DB_USER=tourism_user
   DB_PASSWORD=your_password_here
   DB_NAME=tourism_recommender
   DB_SSLMODE=require
   ```

5. ç‚¹å‡» **"Create Web Service"**

### æ­¥éª¤ 6ï¼šç­‰å¾…éƒ¨ç½²

1. Render ä¼šè‡ªåŠ¨æ„å»ºå’Œéƒ¨ç½²ä½ çš„åº”ç”¨
2. ç‚¹å‡»æœåŠ¡åç§°æŸ¥çœ‹éƒ¨ç½²æ—¥å¿—
3. ç­‰å¾…çŠ¶æ€å˜ä¸º **"Live"**ï¼ˆçº¦ 3-5 åˆ†é’Ÿï¼‰
4. éƒ¨ç½²æˆåŠŸåï¼Œä½ ä¼šè·å¾—ä¸€ä¸ª URLï¼Œå¦‚ï¼š
   ```
   https://tourism-recommender-api.onrender.com
   ```

### æ­¥éª¤ 7ï¼šæµ‹è¯• API

ä½¿ç”¨ä½ çš„æ–° URL æµ‹è¯• APIï¼š

```bash
# æµ‹è¯•å¥åº·æ£€æŸ¥ç«¯ç‚¹
curl https://tourism-recommender-api.onrender.com/api/health

# æµ‹è¯•è·å–æ¨èå®˜åˆ—è¡¨
curl https://tourism-recommender-api.onrender.com/api/recommendors

# æµ‹è¯•è·å–æ¨èå®˜è¯¦æƒ…
curl https://tourism-recommender-api.onrender.com/api/recommendors/1
```

### æ­¥éª¤ 8ï¼šé…ç½®å°ç¨‹åº API åœ°å€

æ›´æ–°å°ç¨‹åºçš„ API åœ°å€é…ç½®ï¼š

åœ¨ `wxapp/app.js` ä¸­ä¿®æ”¹ï¼š

```javascript
App({
  globalData: {
    // å°†æœ¬åœ°åœ°å€æ”¹ä¸º Render çš„åœ°å€
    apiBaseUrl: "https://tourism-recommender-api.onrender.com/api",
    // ...
  },
  // ...
});
```

---

## å…¶ä»–æ–¹æ¡ˆ

### Railway.app

Railway.app æ˜¯å¦ä¸€ä¸ªä¼˜ç§€çš„å…è´¹éƒ¨ç½²å¹³å°ã€‚

**éƒ¨ç½²æ­¥éª¤ï¼š**

1. è®¿é—® [https://railway.app](https://railway.app)
2. ä½¿ç”¨ GitHub ç™»å½•
3. ç‚¹å‡» **"New Project"** â†’ **"Deploy from GitHub repo"**
4. é€‰æ‹©ä½ çš„ä»“åº“
5. Railway ä¼šè‡ªåŠ¨æ£€æµ‹ Go é¡¹ç›®
6. æ·»åŠ  PostgreSQL æ•°æ®åº“æœåŠ¡
7. é…ç½®ç¯å¢ƒå˜é‡
8. ç‚¹å‡» **"Deploy"**

**ä¼˜ç‚¹ï¼š**
- ç•Œé¢ç¾è§‚
- è‡ªåŠ¨é…ç½®
- æ”¯æŒæ—¥å¿—å’Œç›‘æ§

**ç¼ºç‚¹ï¼š**
- å…è´¹é¢åº¦æœ‰é™åˆ¶
- å›½å†…è®¿é—®å¯èƒ½è¾ƒæ…¢

### Zeaburï¼ˆå›½å†…å‹å¥½ï¼‰

å¦‚æœä½ åœ¨å›½å†…ï¼ŒZeabur æ˜¯ä¸€ä¸ªä¸é”™çš„é€‰æ‹©ã€‚

**éƒ¨ç½²æ­¥éª¤ï¼š**

1. è®¿é—® [https://zeabur.com](https://zeabur.com)
2. æ³¨å†Œå¹¶ç™»å½•
3. åˆ›å»ºæ–°é¡¹ç›®
4. æ·»åŠ  GitHub ä»“åº“
5. åˆ›å»ºæœåŠ¡ï¼š
   - æ·»åŠ  PostgreSQL æœåŠ¡
   - æ·»åŠ  Go æœåŠ¡
6. é…ç½®ç¯å¢ƒå˜é‡
7. éƒ¨ç½²

**ä¼˜ç‚¹ï¼š**
- å›½å†…è®¿é—®é€Ÿåº¦å¿«
- æ”¯æŒå›½å†…æ”¯ä»˜
- å¯¹å¼€å‘è€…å‹å¥½

**ç¼ºç‚¹ï¼š**
- å…è´¹é¢åº¦æœ‰é™
- ç›¸å¯¹è¾ƒæ–°

---

## å¸¸è§é—®é¢˜

### Q1: éƒ¨ç½²åæ•°æ®åº“æ˜¯ç©ºçš„ï¼Œæ€ä¹ˆåŠï¼Ÿ

**è§£å†³æ–¹æ¡ˆï¼š**

1. **ä½¿ç”¨æ•°æ®åº“è¿ç§»**ï¼ˆæ¨èï¼‰ï¼š
   - ä½ çš„åº”ç”¨ä¼šè‡ªåŠ¨è¿è¡Œè¿ç§»ï¼ˆ`routes.AutoMigrate`ï¼‰
   - é¦–æ¬¡éƒ¨ç½²æ—¶ï¼Œè¡¨ç»“æ„ä¼šè‡ªåŠ¨åˆ›å»º

2. **æ‰‹åŠ¨å¯¼å…¥æ•°æ®**ï¼š
   - ä½¿ç”¨ pgAdmin æˆ– DBeaver è¿æ¥æ•°æ®åº“
   - å¯¼å…¥æœ¬åœ°æ•°æ®åº“çš„ SQL å¤‡ä»½
   - æˆ–ä½¿ç”¨è„šæœ¬æ’å…¥æµ‹è¯•æ•°æ®

3. **åˆ›å»ºç®¡ç†å‘˜æ¥å£**ï¼š
   - æ·»åŠ ä¸€ä¸ªç®¡ç†æ¥å£ç”¨äºåˆå§‹åŒ–æ•°æ®
   - é€šè¿‡ API è°ƒç”¨åˆ›å»ºåˆå§‹æ•°æ®

### Q2: Render å…è´¹æœåŠ¡ä¼šä¼‘çœ ï¼Œå¦‚ä½•é¿å…ï¼Ÿ

Render å…è´¹å±‚ä¼šåœ¨ 15 åˆ†é’Ÿæ— è¯·æ±‚åä¼‘çœ ï¼Œè¿™æ˜¯æ­£å¸¸çš„ã€‚å¦‚æœä½ éœ€è¦ä¿æŒæœåŠ¡æ´»è·ƒï¼š

- **æ–¹æ¡ˆ 1**ï¼šä½¿ç”¨ cron-job.org å®šæ—¶ ping
- **æ–¹æ¡ˆ 2**ï¼šå‡çº§åˆ°ä»˜è´¹è®¡åˆ’ï¼ˆ$7/æœˆèµ·ï¼‰
- **æ–¹æ¡ˆ 3**ï¼šæ¥å—ä¼‘çœ ï¼Œé¦–æ¬¡è¯·æ±‚ä¼šå”¤é†’æœåŠ¡ï¼ˆçº¦ 30 ç§’ï¼‰

### Q3: å¦‚ä½•æŸ¥çœ‹éƒ¨ç½²æ—¥å¿—ï¼Ÿ

**Render:**
1. è¿›å…¥ä½ çš„ Web Service
2. ç‚¹å‡» **"Logs"** æ ‡ç­¾
3. æŸ¥çœ‹å®æ—¶æ—¥å¿—

**Railway:**
1. è¿›å…¥é¡¹ç›®
2. ç‚¹å‡»æœåŠ¡
3. æŸ¥çœ‹ "Logs" éƒ¨åˆ†

### Q4: éƒ¨ç½²å¤±è´¥æ€ä¹ˆåŠï¼Ÿ

å¸¸è§åŸå› ï¼š

1. **æ„å»ºå¤±è´¥**ï¼š
   - æ£€æŸ¥ `go.mod` å’Œ `go.sum` æ˜¯å¦å®Œæ•´
   - æ£€æŸ¥ä»£ç æ˜¯å¦èƒ½æ­£å¸¸ç¼–è¯‘

2. **å¯åŠ¨å¤±è´¥**ï¼š
   - æ£€æŸ¥ `main.go` çš„ç›‘å¬ç«¯å£
   - ç¡®ä¿ `PORT` ç¯å¢ƒå˜é‡æ­£ç¡®è®¾ç½®

3. **æ•°æ®åº“è¿æ¥å¤±è´¥**ï¼š
   - æ£€æŸ¥æ•°æ®åº“å‡­è¯
   - æ£€æŸ¥é˜²ç«å¢™è®¾ç½®
   - ç¡®è®¤ SSL æ¨¡å¼è®¾ç½®æ­£ç¡®

### Q5: å¦‚ä½•é…ç½® CORSï¼Ÿ

å¦‚æœé‡åˆ°è·¨åŸŸé—®é¢˜ï¼Œåœ¨ `backend/routes/middleware.go` ä¸­ç¡®ä¿ CORS ä¸­é—´ä»¶å·²é…ç½®ï¼š

```go
func SetupMiddleware(router *gin.Engine) {
    // CORS middleware
    router.Use(func(c *gin.Context) {
        c.Writer.Header().Set("Access-Control-Allow-Origin", "*")
        c.Writer.Header().Set("Access-Control-Allow-Credentials", "true")
        c.Writer.Header().Set("Access-Control-Allow-Headers", "Content-Type, Content-Length, Accept-Encoding, X-CSRF-Token, Authorization, accept, origin, Cache-Control, X-Requested-With")
        c.Writer.Header().Set("Access-Control-Allow-Methods", "POST, OPTIONS, GET, PUT, DELETE")

        if c.Request.Method == "OPTIONS" {
            c.AbortWithStatus(204)
            return
        }

        c.Next()
    })
}
```

---

## æ³¨æ„äº‹é¡¹

### å®‰å…¨å»ºè®®

1. **ä¸è¦åœ¨ä»£ç ä¸­ç¡¬ç¼–ç æ•æ„Ÿä¿¡æ¯**
   - ä½¿ç”¨ç¯å¢ƒå˜é‡å­˜å‚¨æ•°æ®åº“å¯†ç 
   - ä¸è¦æäº¤ `.env` æ–‡ä»¶åˆ° Git

2. **é™åˆ¶ API è®¿é—®**
   - è€ƒè™‘æ·»åŠ  API è®¤è¯
   - é™åˆ¶è¯·æ±‚é¢‘ç‡

3. **ä¿æŠ¤æ•°æ®åº“**
   - ä½¿ç”¨å¼ºå¯†ç 
   - é…ç½®é˜²ç«å¢™è§„åˆ™
   - å®šæœŸå¤‡ä»½

### æ€§èƒ½ä¼˜åŒ–

1. **å‡å°‘è¯·æ±‚å»¶è¿Ÿ**
   - å¯ç”¨æ•°æ®åº“è¿æ¥æ± 
   - ä½¿ç”¨ CDN åˆ†å‘é™æ€èµ„æº

2. **ç›‘æ§èµ„æºä½¿ç”¨**
   - å…³æ³¨å…è´¹é¢åº¦é™åˆ¶
   - è®¾ç½®å‘Šè­¦é€šçŸ¥

3. **æ—¥å¿—ç®¡ç†**
   - æ§åˆ¶æ—¥å¿—è¾“å‡ºé‡
   - å®šæœŸæ¸…ç†æ—§æ—¥å¿—

### æˆæœ¬æ§åˆ¶

1. **äº†è§£å…è´¹é¢åº¦**
   - Render: 750 å°æ—¶/æœˆï¼Œ90 å¤©è¯•ç”¨
   - Railway: $5 å…è´¹é¢åº¦
   - Zeabur: æœ‰é™å…è´¹é¢åº¦

2. **é¿å…è¶…é¢**
   - ç›‘æ§ä½¿ç”¨æƒ…å†µ
   - åŠæ—¶å‡çº§æˆ–é™çº§æœåŠ¡

3. **æ¸…ç†ä¸ç”¨çš„èµ„æº**
   - åˆ é™¤æµ‹è¯•æœåŠ¡
   - æ¸…ç†æ—§æ•°æ®

---

## ä¸‹ä¸€æ­¥

éƒ¨ç½²å®Œæˆåï¼Œä½ å¯ä»¥ï¼š

1. âœ… **æµ‹è¯•æ‰€æœ‰ API ç«¯ç‚¹**
   - ç¡®ä¿åŠŸèƒ½æ­£å¸¸
   - éªŒè¯æ•°æ®è¿”å›

2. âœ… **é…ç½®å°ç¨‹åº**
   - æ›´æ–° API åœ°å€
   - æµ‹è¯•å°ç¨‹åºåŠŸèƒ½

3. âœ… **æ·»åŠ ç›‘æ§**
   - è®¾ç½®å¥åº·æ£€æŸ¥
   - é…ç½®é”™è¯¯å‘Šè­¦

4. âœ… **å‡†å¤‡ç”Ÿäº§ç¯å¢ƒ**
   - è´­ä¹°åŸŸå
   - é…ç½® HTTPS
   - è®¾ç½® CDN

---

## è·å–å¸®åŠ©

å¦‚æœé‡åˆ°é—®é¢˜ï¼š

1. æŸ¥çœ‹ Render æ–‡æ¡£ï¼šhttps://render.com/docs
2. æŸ¥çœ‹é¡¹ç›® README
3. æ£€æŸ¥ GitHub Issues
4. è”ç³»æŠ€æœ¯æ”¯æŒ

---

**ç¥ä½ éƒ¨ç½²é¡ºåˆ©ï¼** ğŸš€